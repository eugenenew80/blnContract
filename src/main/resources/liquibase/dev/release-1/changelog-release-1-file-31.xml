<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
		xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
		xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.3.xsd">

	<changeSet id="cm-rus-503" logicalFilePath="path-independent" author="ruslan" context="dev">
		<comment>add column for table: cm_doc_payment_condition</comment>
		<addColumn schemaName="apps"
				   tableName="cm_doc_payment_condition">
			<column name="sap_code" type="varchar2(10)" remarks="Код условия платежа в SAP"/>
	</addColumn>
	</changeSet>

	<changeSet id="cm-rus-504" logicalFilePath="path-independent" author="ruslan" context="dev">
		<comment>Insert ru in table: dm_doc_types_tl</comment>
		<sql dbms="postgres, oracle" endDelimiter=";" splitStatements="true" stripComments="true">
			create table CM_DOC_KEG_CTE_A1H
			(
			id               NUMBER not null,
			contract_id      NUMBER not null,
			doc_number       NUMBER,
			doc_date         DATE,
			doc_version      NUMBER,
			status_id        NUMBER,
			request_id       NUMBER,
			planning_year    NUMBER,
			org_id           number,
			create_by        NUMBER,
			create_date      DATE,
			last_update_by   NUMBER,
			last_update_date DATE
			);
			-- Add comments to the table
			comment on table CM_DOC_KEG_CTE_A1H
			is 'Приложения 1 к договору на передачу эл.энергии по сетям НЭС (заголовки)';
			-- Add comments to the columns
			comment on column CM_DOC_KEG_CTE_A1H.id
			is 'ID записи';
			comment on column CM_DOC_KEG_CTE_A1H.contract_id
			is 'Ссылка на договор';
			comment on column CM_DOC_KEG_CTE_A1H.doc_number
			is 'Номер документа';
			comment on column CM_DOC_KEG_CTE_A1H.doc_date
			is 'Дата документа';
			comment on column CM_DOC_KEG_CTE_A1H.doc_version
			is 'Версия';
			comment on column CM_DOC_KEG_CTE_A1H.status_id
			is 'Статус';
			comment on column CM_DOC_KEG_CTE_A1H.request_id
			is 'Сформирован на основании запроса';
			comment on column CM_DOC_KEG_CTE_A1H.planning_year
			is 'Год';
			comment on column CM_DOC_KEG_CTE_A1H.org_id
			is 'Филиал, составивший приложение';
			comment on column CM_DOC_KEG_CTE_A1H.create_by
			is 'Автор запроса';
			comment on column CM_DOC_KEG_CTE_A1H.create_date
			is 'Дата и время создания записи';
			comment on column CM_DOC_KEG_CTE_A1H.last_update_by
			is 'Автор последнего изменения';
			comment on column CM_DOC_KEG_CTE_A1H.last_update_date
			is 'Дата и время последнего изменения';
			-- Create/Recreate indexes
			create index CM_DOC_KEG_CTE_A1H_N1 on CM_DOC_KEG_CTE_A1H (CONTRACT_ID);
			-- Create/Recreate primary, unique and foreign key constraints
			alter table CM_DOC_KEG_CTE_A1H add constraint CM_DOC_KEG_CTE_A1H_PK  primary key (ID);
			alter table CM_DOC_KEG_CTE_A1H add constraint CM_DOC_KEG_CTE_A1H_FK1 foreign key (CONTRACT_ID) references CM_DOC_KEG_CTE (ID);
			alter table CM_DOC_KEG_CTE_A1H add constraint CM_DOC_KEG_CTE_A1H_FK2 foreign key (ORG_ID) references DICT_ORGANIZATIONS (ID);
		</sql>
		<rollback/>
	</changeSet>
</databaseChangeLog>
